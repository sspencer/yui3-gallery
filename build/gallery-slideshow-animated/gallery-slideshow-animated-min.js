YUI.add("gallery-slideshow-animated",function(E){var D,B;function C(){this._init_animated();}C.prototype={_init_animated:function(){if(this.get("animation_in")){this.anim_in=new E.Anim(this.get("animation_in"));this.anim_in.on("end",this._after_display,this);if(this.get("reverse_animation")){this.orig_anim_in=this.anim_in;this.reverse_anim_in=new E.Anim(this.get("animation_out"));this.reverse_anim_in.on("end",this._after_display,this);this.reverse_anim_in.set("reverse",true);}}else{this.anim_in=null;}if(this.get("animation_in")){this.anim_out=new E.Anim(this.get("animation_out"));this.anim_out.on("end",this._after_hide,this);if(this.get("reverse_animation")){this.orig_anim_out=this.anim_out;this.reverse_anim_out=new E.Anim(this.get("animation_in"));this.reverse_anim_out.on("end",this._after_hide,this);this.reverse_anim_out.set("reverse",true);}}else{this.anim_out=null;}this._prep_slides();},_prep_slides:function(){var G=this.anim_out.get("to"),F=(parseInt(G.opacity,10));if(!isNaN(F)){this.get("slides").each(function(H){if(!H.hasClass(E.Slideshow.CURRENT_CLASS)){H.setStyle("opacity",F);}});}},show_slide:function(F){this.timer.cancel();if(this._anim_running()){E.later(this.get("pause_time")/20,this,"show_slide",F);}else{if(F!=this.get("current_slide")){this.set("current_slide",F);this.syncUI();}}},_anim_running:function(){if(this.anim_in.get("running")||this.anim_out.get("running")){return true;}else{return false;}},_display_slide:function(G){var F=this.get("slides").item(G);this._before_display();F.addClass(E.Slideshow.CURRENT_CLASS);this.anim_in.set("node",F);this.anim_in.run();},_hide_slide:function(F){this._before_hide();this.anim_out.set("node",this.get("slides").item(F));this.anim_out.run();},_after_hide:function(){this.get("slides").item(this.hide_slide).removeClass(E.Slideshow.CURRENT_CLASS);this.fire("slideshow:slide-hidden",{slide:this.get("slides").item(this.hide_slide),slide_number:this.hide_slide});},advance:function(){if(this.get("reverse_animation")){this.anim_in=this.orig_anim_in;this.anim_out=this.orig_anim_out;}this.anim_in.set("reverse",false);this.anim_out.set("reverse",false);this.show_slide(this._get_next_slide());},previous:function(){if(this.get("reverse_animation")){this.anim_in=this.reverse_anim_in;this.anim_out=this.reverse_anim_out;}this.show_slide(this._get_previous_slide());}};D=E.Base.build("SlideshowAnimated",E.Slideshow,[C]);D.ANIMATION_DURATION=0.5;D.EASING=E.Easing.easeNone;D.ATTRS={animation_out:{value:{from:{opacity:1},to:{opacity:0},duration:D.ANIMATION_DURATION,easing:D.EASING}},animation_in:{value:{from:{opacity:0},to:{opacity:1},duration:D.ANIMATION_DURATION,easing:D.EASING}},reverse_animation:{value:false}};function A(){this._init_panned();}A.ATTRS={container:{value:null}};A.CONTAINER_SELECTOR=".container";A.HTML_PARSER={container:function(F){return F.one(A.CONTAINER_SELECTOR);}};A.prototype={_init_panned:function(){var F,H,G=this.get("slides").item(this.get("current_slide"));this.anim_in.set("node",this.get("container"));this.anim_in.on("end",this._after_hide,this);this.top_corner={y:G.getY(),x:G.getX()};this.slide_start_positions=[];this.get("slides").each(function(I){H=I.getY();F=I.getX();this.slide_start_positions.push({x:F-this.top_corner.x,y:H-this.top_corner.y});},this);},_prep_slides:function(){},_container_location:function(){var G=this.get("container"),F=G.getX(),H=G.getY();return{x:F,y:H};},_display_slide:function(L){var H=this.slide_start_positions[L],K=this.slide_start_positions[this.hide_slide],F=this._container_location(),J=false,I=false,G={};if(H.y!=K.y){if(H.y<K.y){J=(Math.abs(K.y)-Math.abs(H.y))+F.y-this.top_corner.y;}else{J=(H.y-Math.abs(K.y)-F.y+this.top_corner.y)*-1;}}if(J!==false){G.top=J;}if(H.x!=K.x){if(H.x<K.x){I=(Math.abs(K.x)-Math.abs(H.x))+F.x-this.top_corner.x;}else{I=(H.x-Math.abs(K.x)-F.x+this.top_corner.x)*-1;}}if(I!==false){G.left=I;}this._before_display();this.anim_in.set("to",G);this._before_hide();this.anim_in.run();this.get("slides").item(L).addClass(E.Slideshow.CURRENT_CLASS);this.get("slides").item(this.hide_slide).removeClass(E.Slideshow.CURRENT_CLASS);},_hide_slide:function(F){}};B=E.Base.build("SlideshowPanned",D,[A]);D.AUTO_HORIZONTAL_CLASS="horizontalSlideshow";D.AUTO_CROSS_HORIZONTAL_CLASS="horizontalCrossSlideshow";D.AUTO_VERTICAL_CLASS="verticalSlideshow";D.AUTO_CROSS_VERTICAL_CLASS="verticalCrossSlideshow";D.AUTO_PANNING_CLASS="panningSlideshow";D.auto_shows={};D._auto_get_slide=function(G){var F=G.one(".slide.current");if(!F){F=G.one(".slide");F.addClass(E.Slideshow.CURRENT_CLASS);}return F;};D._auto_merge_attrs=function(F,G){var H=F,I=D.ANIMATION_DURATION,J=D.EASING;if(G){if(G.duration){I=G.duration;}if(G.easing){J=G.easing;}H=E.merge(G,F);}if(H.animation_in){if(!H.animation_in.duration){H.animation_in.duration=I;}if(!H.animation_in.easing){H.animation_in.easing=J;}}if(H.animation_out){if(!H.animation_out.duration){H.animation_out.duration=I;}if(!H.animation_out.easing){H.animation_out.easing=J;}}return H;};D._auto_horizontal=function(L,H,I){var G=D._auto_get_slide(L),J=parseInt(G.getComputedStyle("width"),10),F,M,K;if(!J){if(G.getStyle("display").toLowerCase()=="none"){G.setStyle("display","block");J=parseInt(G.getComputedStyle("width"),10);}}F=parseInt(G.getComputedStyle("left"),10)||0;M=F+J;if(H===D.AUTO_CROSS_HORIZONTAL_CLASS){K={animation_out:{from:{left:F},to:{left:M}},animation_in:{from:{left:M},to:{left:F}}};}else{K={animation_out:{from:{left:F},to:{left:(-1*M)}},animation_in:{from:{left:M},to:{left:F}}};}K.contentBox=L;K.reverse_animation={value:true};return new D(D._auto_merge_attrs(K,I));};D._auto_vertical=function(K,H,I){var G=D._auto_get_slide(K),F=parseInt(G.getComputedStyle("height"),10),J;if(!F){if(G.getStyle("display").toLowerCase()=="none"){G.setStyle("display","block");F=parseInt(G.getComputedStyle("height"),10);}}if(H===D.AUTO_CROSS_VERTICAL_CLASS){J={animation_out:{from:{top:0},to:{top:(-1*F)}},animation_in:{from:{top:(-1*F)},to:{top:0}}};}else{J={animation_out:{from:{top:0},to:{top:F}},animation_in:{from:{top:(-1*F)},to:{top:0}}};
}J.contentBox=K;J.reverse_animation={value:true};return new D(D._auto_merge_attrs(J,I));};D.auto_shows[D.AUTO_HORIZONTAL_CLASS]=function(G,F){return D._auto_horizontal(G,D.AUTO_HORIZONTAL_CLASS,F);};D.auto_shows[D.AUTO_CROSS_HORIZONTAL_CLASS]=function(G,F){return D._auto_horizontal(G,D.AUTO_CROSS_HORIZONTAL_CLASS,F);};D.auto_shows[D.AUTO_VERTICAL_CLASS]=function(G,F){return D._auto_vertical(G,D.AUTO_VERTICAL_CLASS,F);};D.auto_shows[D.AUTO_CROSS_VERTICAL_CLASS]=function(G,F){return D._auto_vertical(G,D.AUTO_CROSS_VERTICAL_CLASS,F);};D.auto_shows[D.AUTO_PANNING_CLASS]=function(G,F){return new B(D._auto_merge_attrs({contentBox:G},F));};D.auto=function(H){var J=[],G,K,I,F;for(K in D.auto_shows){if(D.auto_shows.hasOwnProperty(K)){J.push(K);}}E.all(E.Slideshow.AUTO_SLIDESHOW_SELECTOR).each(function(){G=false;for(I=0,F=J.length;I<F;I++){if(this.hasClass(J[I])){G=D.auto_shows[J[I]](this,H);break;}}if(!G){G=new D(D._auto_merge_attrs({contentBox:this},H));}G.render();});};E.SlideshowAnimated=D;E.SlideshowPanned=B;},"gallery-2010.03.23-17-54",{requires:["node","event","widget","anim","gallery-slideshow-base"]});