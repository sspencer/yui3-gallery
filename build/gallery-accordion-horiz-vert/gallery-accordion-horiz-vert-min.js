YUI.add("gallery-accordion-horiz-vert",function(B){var F=(0<B.UA.ie&&B.UA.ie<8),I=(F?1:0);function G(J){if(arguments.length===0){return;}J=J||{};if(B.Lang.isUndefined(J.tabIndex)){J.tabIndex=null;}G.superclass.constructor.call(this,J);}function D(){return !B.Lang.isUndefined(B.Anim);}function E(J){return(J&&!B.Lang.isUndefined(B.Anim));}G.NAME="accordion";G.ATTRS={horizontal:{value:false,writeOnce:true},titles:{writeOnce:true},replaceTitleContainer:{value:true,validator:B.Lang.isBoolean},sections:{writeOnce:true},replaceSectionContainer:{value:true,validator:B.Lang.isBoolean},allowAllClosed:{value:false,validator:B.Lang.isBoolean,setter:function(J){this.allow_all_closed=J;return J;}},allowMultipleOpen:{value:false,validator:B.Lang.isBoolean},animateRender:{value:false,writeOnce:true,validator:B.Lang.isBoolean,setter:E},animateInsertRemove:{valueFn:D,validator:B.Lang.isBoolean,setter:E},animateOpenClose:{valueFn:D,validator:B.Lang.isBoolean,setter:E},animateDuration:{value:null,validator:function(J){return(J===null||B.Lang.isNumber(J));}},animateEasing:{value:null,validator:function(J){return(J===null||B.Lang.isFunction(J));}}};G.HTML_PARSER={titles:function(J){return J.all("li div:nth-child(1)");},sections:function(J){return J.all("li div:nth-child(2)");}};var A=B.ClassNameManager.getClassName(G.NAME,"open");var C=B.ClassNameManager.getClassName(G.NAME,"closed");function H(J){B.Event.purgeElement(J,true);while(J.hasChildNodes()){J.removeChild(J.lastChild);}}B.extend(G,B.Widget,{initializer:function(J){this.section_list=[];if(this.get("horizontal")){this.slide_style_name="width";this.slide_size_name="offsetWidth";this.fixed_style_name="height";this.fixed_size_name="offsetHeight";}else{this.slide_style_name="height";this.slide_size_name="offsetHeight";this.fixed_style_name="width";this.fixed_size_name="offsetWidth";}this.after("allowMultipleOpenChange",function(K){if(this.section_list&&this.section_list.length>0&&!K.newVal){this.closeAllSections();}});this.after("allowAllClosedChange",function(K){if(this.section_list&&this.section_list.length>0&&!K.newVal&&this.allSectionsClosed()){this.toggleSection(0);}});},renderUI:function(){this.get("boundingBox").addClass(this.getClassName(this.get("horizontal")?"horiz":"vert"));var M=this.get("titles");if(B.Lang.isString(M)){M=B.all(M);}var N=this.get("sections");if(B.Lang.isString(N)){N=B.all(N);}if(M instanceof B.NodeList&&N instanceof B.NodeList&&M.size()==N.size()){var K=this.get("animateInsertRemove");this.set("animateInsertRemove",this.get("animateRender"));var L=M.size();for(var J=0;J<L;J++){this.appendSection(M.item(J),N.item(J));}this.set("animateInsertRemove",K);}else{if(M instanceof Array&&N instanceof Array&&M.length==N.length){var K=this.get("animateInsertRemove");this.set("animateInsertRemove",this.get("animateRender"));var L=M.length;for(var J=0;J<L;J++){this.appendSection(M[J],N[J]);}this.set("animateInsertRemove",K);}else{}}},getSectionCount:function(){return this.section_list.length;},getTitle:function(J){return this.section_list[J].title;},setTitle:function(J,N){var K=this.section_list[J].title;H(K);var L;if(B.Lang.isString(N)){var L=B.one(N);if(!L){K.set("innerHTML",N);}}else{L=N;}if(L&&this.get("replaceTitleContainer")){var M=K.get("parentNode");M.removeChild(K);M.appendChild(L);this.section_list[J].title=L;L.addClass(this.getClassName("title"));L.addClass(this.section_list[J].open?A:C);}else{if(L){K.appendChild(L);}}if(F){K.setStyle("display",K.innerHTML?"":"none");}},getSection:function(J){return this.section_list[J].content;},setSection:function(J,L){var N=this.section_list[J].content;H(N);var K;if(B.Lang.isString(L)){var K=B.one(L);if(!K){N.set("innerHTML",L);}}else{K=L;}if(K&&this.get("replaceSectionContainer")){var M=N.get("parentNode");M.removeChild(N);M.appendChild(K);this.section_list[J].content=K;K.addClass(this.getClassName("content"));K.addClass(this.section_list[J].open?A:C);}else{if(K){N.appendChild(K);}}},_getClip:function(J){return this.section_list[J].clip;},prependSection:function(K,J){return this.insertSection(0,K,J);},appendSection:function(K,J){return this.insertSection(this.section_list.length,K,J);},insertSection:function(L,P,M){this.fire("beforeInsert",L);var Q=new B.Node(document.createElement("div"));Q.addClass(this.getClassName("title"));Q.addClass(C);var O=new B.Node(document.createElement("div"));O.addClass(this.getClassName("content-clip"));O.setStyle(this.slide_style_name,I+"px");if(this.get("animateOpenClose")){O.setStyle("opacity",0);}var N=new B.Node(document.createElement("div"));N.addClass(this.getClassName("content"));N.addClass(C);O.appendChild(N);this.section_list.splice(L,0,{title:Q,clip:O,content:N,open:false,anim:null});if(L<this.section_list.length-1){this.get("contentBox").insertBefore(Q,this.section_list[L+1].title);}else{this.get("contentBox").appendChild(Q);}this.setTitle(L,P);Q=this.section_list[L].title;var R=Q.get(this.slide_size_name);if(this.get("animateInsertRemove")){Q.setStyle(this.slide_style_name,I+"px");var K={node:Q,from:{opacity:0},to:{opacity:1}};K.to[this.slide_style_name]=R;var J=this._createAnimator(K);J.on("end",function(T,S){this.section_list[S].title.setStyle(this.slide_style_name,"auto");},this,L);J.run();}if(M){this.setSection(L,M);N=this.section_list[L].content;}if(L<this.section_list.length-1){this.get("contentBox").insertBefore(O,this.section_list[L+1].title);}else{this.get("contentBox").appendChild(O);}this.fire("insert",L,R);if(!this.allow_all_closed&&this.allSectionsClosed()){this.toggleSection(0);}return{title:Q,content:N};},removeSection:function(L){this.fire("beforeRemove",L);function J(P,O){O[0].removeChild(O[1]);O[0].removeChild(O[2]);}var K=[this.get("contentBox"),this.section_list[L].title,this.section_list[L].clip];if(this.get("animateInsertRemove")){var N={node:this.section_list[L].clip,from:{opacity:1},to:{opacity:0}};N.to[this.slide_style_name]=I;if(this.section_list[L].open){this._startAnimator(L,N);}N.node=this.section_list[L].title;var M=this._createAnimator(N);
M.on("end",J,null,K);M.run();}else{J(null,K);}this.section_list.splice(L,1);if(!this.allow_all_closed&&this.allSectionsClosed()){this.toggleSection(0);}this.fire("remove",L);},findSection:function(K){K=B.Node.getDOMNode(B.one(K));var M=this.section_list.length;for(var J=0;J<M;J++){var N=B.Node.getDOMNode(this.section_list[J].title);var L=B.Node.getDOMNode(this.section_list[J].content);if(K==N||B.DOM.contains(N,K)||K==L||B.DOM.contains(L,K)){return J;}}return false;},isSectionOpen:function(J){return this.section_list[J].open;},openSection:function(J){if(!this.section_list[J].open){this.toggleSection(J);}},closeSection:function(J){if(this.section_list[J].open){this.toggleSection(J);}},allSectionsOpen:function(){var K=this.section_list.length;for(var J=0;J<K;J++){if(!this.section_list[J].open){return false;}}return true;},allSectionsClosed:function(){var K=this.section_list.length;for(var J=0;J<K;J++){if(this.section_list[J].open){return false;}}return true;},toggleSection:function(J){if(!this.section_list[J].open&&!this.get("allowMultipleOpen")){var M=this.allow_all_closed;this.allow_all_closed=true;this.closeAllSections();this.allow_all_closed=M;}else{if(this.section_list[J].open&&!this.allow_all_closed){this.section_list[J].open=false;if(this.allSectionsClosed()){this.section_list[J].open=true;return;}this.section_list[J].open=true;}}function O(S,R){this.section_list[R].clip.setStyle(this.slide_style_name,"auto");this.fire("open",R);}function Q(S,R){this.fire("close",R);}if(!this.section_list[J].open){this.fire("beforeOpen",J);this.section_list[J].open=true;this.section_list[J].title.replaceClass(C,A);this.section_list[J].content.replaceClass(C,A);var K=this.section_list[J].content.get(this.slide_size_name);if(this.get("animateOpenClose")){var P={node:this.section_list[J].clip,from:{opacity:0},to:{opacity:1}};P.to[this.slide_style_name]=K;var N=this._startAnimator(J,P);N.on("end",O,this,J);}else{var L=this.section_list[J].clip;if(L.getStyle("opacity")=="0"){L.setStyle("opacity",1);}O.call(this,null,J);}}else{this.fire("beforeClose",J);this.section_list[J].open=false;this.section_list[J].title.replaceClass(A,C);this.section_list[J].content.replaceClass(A,C);if(this.get("animateOpenClose")){var P={node:this.section_list[J].clip,from:{opacity:1},to:{opacity:0}};P.to[this.slide_style_name]=I;var N=this._startAnimator(J,P);N.on("end",Q,this,J);}else{this.section_list[J].clip.setStyle(this.slide_style_name,I+"px");Q.call(this,null,J);}}},openAllSections:function(){if(this.get("allowMultipleOpen")){var K=this.section_list.length;for(var J=0;J<K;J++){if(!this.section_list[J].open){this.toggleSection(J);}}}},closeAllSections:function(){var K=this.section_list.length;var L=true;for(var J=0;J<K;J++){if(this.section_list[J].open){if(!this.allow_all_closed&&L){L=false;}else{this.toggleSection(J);}}}if(!this.allow_all_closed&&L){this.toggleSection(0);}},_createAnimator:function(K){var J=this.get("animateDuration");if(J!==null){K.duration=J;}var L=this.get("animateEasing");if(L!==null){K.easing=L;}return new B.Anim(K);},_startAnimator:function(J,L){var K=this.section_list[J].anim;if(K){K.stop(true);}this.section_list[J].anim=K=this._createAnimator(L);K.on("end",function(N,M,O){if(M<this.section_list.length&&this.section_list[M].anim==O){this.section_list[M].anim=null;}},this,J,K);K.run();return K;}});B.Accordion=G;},"gallery-2010.01.13-20",{optional:["anim-base"],requires:["widget","selector-css3"]});