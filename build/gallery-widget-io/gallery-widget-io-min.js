YUI.add("gallery-widget-io",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NS="io";A.NAME="widgetIO";A.ATTRS={uri:{value:null},cfg:{value:null},formatter:{valueFn:function(){return this._defFormatter;}},loading:{value:'<img class="yui3-loading" width="32px" height="32px" src="<?php echo $assetsDirectory ?>img/ajax-loader.gif">'}};B.extend(A,B.Plugin.Base,{destructor:function(){if(this._activeIO){B.io.abort(this._activeIO);this._activeIO=null;}},refresh:function(){if(!this._activeIO){var C=this.get("uri");if(C){cfg=this.get("cfg")||{};cfg.on=cfg.on||{};cfg.on.start=cfg.on.start||B.bind(this._defStartHandler,this);cfg.on.complete=cfg.on.complete||B.bind(this._defCompleteHandler,this);cfg.on.success=cfg.on.success||B.bind(this._defSuccessHandler,this);cfg.on.failure=cfg.on.failure||B.bind(this._defFailureHandler,this);cfg.method=cfg.method;B.io(C,cfg);}}},setContent:function(C){this.get("host").get("contentBox").setContent(C);},_defSuccessHandler:function(F,E){var C=E.responseText;var D=this.get("formatter");this.setContent(D(C));},_defFailureHandler:function(D,C){this.setContent("Failed to retrieve content");},_defStartHandler:function(D,C){this._activeIO=C;this.setContent(this.get("loading"));},_defCompleteHandler:function(D,C){this._activeIO=null;},_defFormatter:function(C){return C;}});B.Plugin.WidgetIO=A;},"gallery-2010.03.16-20",{requires:["plugin","widget","io"]});